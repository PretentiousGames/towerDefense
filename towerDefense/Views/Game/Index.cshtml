@using TowerDefense.Business
@model TowerDefense.Business.Models.Game

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>Tower Defense Game @Model.Name</title>
    <link rel="import" href="~/app/includes.html">
</head>
<body>
    <script>
        (function() {
            var rawModel = @Html.Raw(Json.Encode(Model));
            var cleanUp = function(m) {
                var players = m.Players;
                _.forEach(players, function (p){return {name: p.Name, tower: p.Tower};});
                return { players: players };
            };
            var model = cleanUp(rawModel);
            window.towerDefense = window.towerDefense || {};
            window.towerDefense.game = model;
        })();

    </script>
    <game-page gamename="@Model.Name"></game-page>
</body>
</html>